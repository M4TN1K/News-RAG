# Система обработки и анализа новостей

Проект представляет собой комплексную систему для сбора, обработки и анализа новостных данных с использованием современных технологий машинного обучения и обработки естественного языка.

## Архитектура проекта

Проект состоит из следующих основных компонентов:

### 1. Парсер новостей (Parser)
- Автоматический сбор новостей из различных источников
- Обработка и нормализация текстовых данных
- Сохранение данных в PostgreSQL

### 2. Обработка текста (ChunkProcessor)
- Разбиение текста на смысловые чанки
- Векторизация текста с использованием sentence-transformers
- Подготовка данных для индексации

### 3. Векторный поиск (faiss_search)
- Индексация и поиск с использованием FAISS
- Эффективный поиск похожих документов
- Автоматическое обновление индекса

### 4. RAG система
- Интеграция с LangChain для работы с LLM
- Система переранжирования результатов
- Telegram бот для взаимодействия с пользователями
- API для доступа к функционалу системы

### 5. Оркестрация (Airflow)
- Управление DAG'ами для автоматизации процессов

## Технологический стек

- **Языки программирования**: Python 3.9+
- **База данных**: PostgreSQL
- **Векторный поиск**: FAISS
- **ML/NLP**: 
  - sentence-transformers
  - LangChain
  - OpenAI API
  - Cross-Encoder (ms-marco-MiniLM-L-6-v2) для переранжирования
- **Оркестрация**: Apache Airflow
- **API**: FastAPI
- **Мессенджер**: Telegram Bot (aiogram)
- **Контейнеризация**: Docker

## Установка и запуск

### Предварительные требования
- Docker и Docker Compose
- Python 3.9+
- Доступ к API OpenAI
- Telegram Bot Token

### Настройка окружения

1. Клонируйте репозиторий:
```bash
git clone [URL репозитория]
cd NEWS_SCRAPPER
```

2. Создайте файл `.env` в корневой директории:
```env
OPENAI_API_KEY=your_api_key
TELEGRAM_BOT_TOKEN=your_bot_token
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password
POSTGRES_DB=your_db_name
```

3. Запустите систему с помощью Docker Compose:
```bash
docker-compose up -d
```

## Структура проекта

```
src/
├── RAG/                    # RAG система и API
│   ├── telegram_bot/       # Telegram бот
│   ├── reranker/          # Система переранжирования
│   └── requirements.txt    # Зависимости RAG системы
├── Parser/                 # Парсер новостей
├── ChunkProcessor/         # Обработка текста
├── faiss_search/          # Векторный поиск
├── dags/                   # Airflow DAG'и
├── airflow/               # Конфигурация Airflow
├── config/                # Конфигурационные файлы
├── SQL/                   # SQL скрипты
└── docker-compose.yaml    # Конфигурация Docker
```

## Использование

### Telegram Bot
Бот доступен для взаимодействия с RAG системой. Поддерживаемые команды:
- `/start` - Начало работы с ботом и приветственное сообщение
- Для задания вопроса просто отправьте текст сообщения боту

