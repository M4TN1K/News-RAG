# RAG News System

Система для сбора, обработки и семантического поиска новостей с использованием RAG (Retrieval-Augmented Generation) архитектуры.

## Описание

Проект представляет собой комплексное RAG-решение для работы с новостными данными:
- Сбор новостей с веб-сайта
- Обработка и разбиение текста на чанки с аугументацией метаинформацией
- Создание векторных эмбеддингов с использованием современных языковых моделей
- Индексация и семантический поиск с использованием FAISS
- Автоматизация процессов сбора данных через Airflow
- Telegram-бот для взаимодействия с системой через естественный язык

## Архитектура RAG

```
[Источники данных] → [Парсер] → [ChunkProcessor] → [FAISS Index] → [RAG API] → [Telegram Bot]
     ↑                    ↑             ↑              ↑               ↑
     └────────────────────┴─────────────┴──────────────┴───────────────┘
                              Airflow DAG
```

### Компоненты системы:

1. **Парсер (Parser)**
   - Сбор новостей с веб-сайтов
   - Сохранение в PostgreSQL

2. **Обработчик чанков (ChunkProcessor)**
   - Разбиение текста на семантические чанки
   - Генерация эмбеддингов с помощью Sentence Transformers
   - Аугументация метаданными

3. **FAISS Индексатор**
   - Векторная индексация чанков
   - Эффективный семантический поиск
   - Автоматическое обновление индекса

4. **RAG API (FastAPI)**
   - REST API для поиска
   - Интеграция с языковыми моделями
   - Обработка запросов на естественном языке

5. **Telegram Bot**
   - Интерфейс для пользователей
   - Обработка запросов на естественном языке
   - Форматирование и отправка результатов

## Технологии

- **Языковые модели**: Sentence Transformers, HuggingFace
- **Векторный поиск**: FAISS
- **База данных**: PostgreSQL
- **API**: FastAPI
- **Оркестрация**: Apache Airflow
- **Контейнеризация**: Docker & Docker Compose
- **Мессенджер**: Telegram Bot API

## Требования

- Docker и Docker Compose
- Python 3.10+
- Доступ к HuggingFace API
- Telegram Bot Token

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/NEWS_SCRAPPER.git
   cd NEWS_SCRAPPER
   ```

2. Создайте файл `.env` на основе `.env.example`:
   ```bash
   cp .env.example .env
   ```
   Заполните необходимые переменные окружения в `.env`

3. Соберите и запустите сервисы:
   ```bash
   cd src
   docker-compose build
   docker-compose up -d
   ```

4. Откройте Airflow UI: [http://localhost:8080](http://localhost:8080)
   - Логин: airflow
   - Пароль: airflow

5. Запустите DAG `news_preprocessing_dag`

## Использование

### Через Telegram бот
1. Найдите бота в Telegram
2. Отправьте запрос на естественном языке
3. Получите релевантные новости с контекстом

### Через API
```python
import requests

response = requests.post(
    "http://localhost:8000/ask",
    json={"question": "Ваш вопрос"}
)
print(response.json())
```

## Разработка

### Структура базы данных
- `articles` - таблица с новостями
- `chunks` - таблица с чанками и эмбеддингами

### Добавление новых источников
1. Добавьте парсер в `src/Parser/`
2. Обновите конфигурацию в `.env`
3. Перезапустите сервисы

## Лицензия

MIT

## Автор

Матвей Никульников

## Контакты

- Email: nikulnikov2003@icloud.com